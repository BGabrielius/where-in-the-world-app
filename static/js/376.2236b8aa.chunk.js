"use strict";(self.webpackChunkwhereintheworld=self.webpackChunkwhereintheworld||[]).push([[376],{1376:function(e,n,i){i.r(n),i.d(n,{default:function(){return H}});var a=i(1413),t=i(9439),s=i(4165),r=i(5861),c=i(1044),l=i(2791),u=i(1933),o=i(7689),d=i(7510),m=i(3433),f="QuizAnswers_container__36hKA",p="QuizAnswers_btnContainer__cuR4Q",h="QuizAnswers_quizBtn__kk+yE",x="QuizAnswers_selectedCorrect__Cxbmc",j="QuizAnswers_selectedIncorrect__mgvn0",v="QuizAnswers_forwardBtnContainer__Njssm",_="QuizAnswers_forwardBtn__rYVM4",g="QuizAnswers_forwardIcon__BnO8m",y=i(1928),N=i(184),C=function(e){var n=e.correct,i=e.incorrect,a=e.updateStage,s=e.handleResults,r=(0,l.useState)([]),c=(0,t.Z)(r,2),u=c[0],o=c[1],C=(0,l.useState)(null),I=(0,t.Z)(C,2),S=I[0],w=I[1];l.useEffect((function(){n&&o([].concat((0,m.Z)(i.map((function(e){return{value:e,isCorrect:!1}}))),[{value:n,isCorrect:!0}]).sort((function(){return Math.random()-.5})))}),[n,i]);return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("div",{className:f,children:[(0,N.jsx)("div",{className:p,children:u.map((function(e){return(0,N.jsx)(d.E.button,{onClick:function(){return function(e){s(e.isCorrect),w(e)}(e)},className:"".concat(h," quiz-btn ").concat(S?"disabled":"","\n            ").concat(S&&e.isCorrect&&x,"\n            ").concat(!(null!==S&&void 0!==S&&S.isCorrect)&&e===S&&j,"\n            "),disabled:!!S,initial:{opacity:0},animate:{opacity:1},children:e.value},e.value+e.isCorrect)}))}),(0,N.jsx)("div",{className:v,children:S&&(0,N.jsx)(d.E.button,{animate:{scale:[0,1.5,1.5,1]},transition:{type:"tween",duration:.5},initial:{scale:0},onClick:function(){s(null),w(null),a()},className:"".concat(_," element-full"),children:(0,N.jsx)(y.yr4,{className:g})})})]})})},I=i(3791),S=i(6856),w=i(8014),Q={wrapper:"ResultTracker_wrapper__nIYzs",numericContainer:"ResultTracker_numericContainer__RbWg8",numericStageContainer:"ResultTracker_numericStageContainer__lSzvB",resultsContainer:"ResultTracker_resultsContainer__X26RA",iconContainer:"ResultTracker_iconContainer__dGn-s",iconTransform:"ResultTracker_iconTransform__e9Dq4"},R=function(e){var n=e.difficulty,i=e.questionIndex,s=e.questionStage,r=e.isCorrect,c=e.cacheResults,u=(0,l.useState)({easy:Array.from({length:10}).fill("pending"),medium:Array.from({length:10}).fill("pending"),difficult:Array.from({length:10}).fill("pending"),currentIndex:null,currentStage:null}),o=(0,t.Z)(u,2),f=o[0],p=o[1],h={initial:{},animate:{y:[50,0],x:[75,0],scale:[2,1],rotateX:[180,0],rotateY:[360,250,180,90,0],rotate:[360,180,90,0]},exit:{y:[50,0],x:[50,0]}};(0,l.useEffect)((function(){!0!==r&&!1!==r||x(i,r,s),9===f.currentIndex&&(1===f.currentStage&&"easy"===n?c(f.easy):2===f.currentStage&&"medium"===n?c(f.easy,f.medium):3===f.currentStage&&"difficult"===n&&c(f.easy,f.medium,f.difficult))}),[r,s]);var x=function(e,n,i){var t=[];1===i?((t=(0,m.Z)(f.easy))[e]=n,p((0,a.Z)((0,a.Z)({},f),{},{easy:t,currentIndex:e,currentStage:i}))):2===i?((t=(0,m.Z)(f.medium))[e]=n,p((0,a.Z)((0,a.Z)({},f),{},{medium:t,currentIndex:e,currentStage:i}))):3===i&&((t=(0,m.Z)(f.difficult))[e]=n,p((0,a.Z)((0,a.Z)({},f),{},{difficult:t,currentIndex:e,currentStage:i})))};return(0,N.jsx)(I.M,{children:(0,N.jsxs)(d.E.div,{className:"".concat(Q.wrapper," element-full"),initial:{opacity:0},animate:{opacity:1},transition:{delay:.3,duration:.3},children:[(0,N.jsxs)(d.E.div,{className:"".concat(Q.numericContainer," element-border "),initial:{scale:0},animate:{scale:1},transition:{delay:.3},children:[(0,N.jsx)("span",{className:"numeric-stage-filler"}),(0,N.jsx)("span",{children:"I"}),(0,N.jsx)("span",{children:"II"}),(0,N.jsx)("span",{children:"III"}),(0,N.jsx)("span",{children:"IV"}),(0,N.jsx)("span",{children:"V"}),(0,N.jsx)("span",{children:"VI"}),(0,N.jsx)("span",{children:"VII"}),(0,N.jsx)("span",{children:"VIII"}),(0,N.jsx)("span",{children:"IX"}),(0,N.jsx)("span",{children:"X"})]}),(0,N.jsxs)(d.E.div,{className:"".concat(Q.resultsContainer," element-border"),initial:{scale:0},animate:{scale:1},transition:{delay:.3},children:[(0,N.jsx)("span",{className:"".concat(Q.numericStageContainer," numeric-stage-filler"),children:"easy"===n?(0,N.jsx)("span",{children:"I"}):"medium"===n?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("span",{children:"I"}),(0,N.jsx)("span",{children:"II"})]}):"difficult"===n?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("span",{children:"I"}),(0,N.jsx)("span",{children:"II"}),(0,N.jsx)("span",{children:"III"})]}):(0,N.jsx)(N.Fragment,{})}),f.easy&&"easy"===n&&f.easy.map((function(e,n){return(0,N.jsx)("span",{className:"".concat(Q.iconContainer," ").concat(Q.iconTransform),children:(0,N.jsxs)(d.E.span,{variants:h,initial:"initial",animate:n===f.currentIndex&&i===n?"animate":"initial",exit:"exit",className:Q.easy,children:["pending"===f.easy[n]&&(0,N.jsx)(S.FAs,{}),!0===f.easy[n]&&(0,N.jsx)(w.pkh,{}),!1===f.easy[n]&&(0,N.jsx)(w.FUQ,{})]},"icon-wrapper-".concat(r))},n)})),f.medium&&"medium"===n&&f.medium.map((function(e,n){return(0,N.jsxs)("span",{className:Q.iconContainer,children:[(0,N.jsx)("span",{className:Q.iconTransform,children:(0,N.jsx)(d.E.span,{variants:h,initial:"initial",animate:n===f.currentIndex&&i===n&&1===f.currentStage&&f.currentStage===s?"animate":"initial",exit:"exit",className:Q.easy,children:"pending"===f.easy[n]?(0,N.jsx)(S.FAs,{}):!0===f.easy[n]?(0,N.jsx)(w.pkh,{}):!1===f.easy[n]?(0,N.jsx)(w.FUQ,{}):(0,N.jsx)(N.Fragment,{})})}),(0,N.jsx)("span",{className:Q.iconTransform,children:(0,N.jsx)(d.E.span,{variants:h,initial:"initial",animate:n===f.currentIndex&&i===n&&2===f.currentStage&&f.currentStage===s?"animate":"initial",exit:"exit",className:Q.medium,children:"pending"===f.medium[n]?(0,N.jsx)(S.FAs,{}):!0===f.medium[n]?(0,N.jsx)(w.pkh,{}):!1===f.medium[n]?(0,N.jsx)(w.FUQ,{}):(0,N.jsx)(N.Fragment,{})})})]},"icon-wrapper-".concat(n,"-").concat(r))})),f&&"difficult"===n&&f.medium.map((function(e,n){return(0,N.jsxs)("span",{className:Q.iconContainer,children:[(0,N.jsx)("span",{className:Q.iconTransform,children:(0,N.jsx)(d.E.span,{variants:h,initial:"initial",animate:n===f.currentIndex&&i===n&&1===f.currentStage&&f.currentStage===s?"animate":"initial",exit:"exit",className:Q.easy,children:"pending"===f.easy[n]?(0,N.jsx)(S.FAs,{}):!0===f.easy[n]?(0,N.jsx)(w.pkh,{}):!1===f.easy[n]?(0,N.jsx)(w.FUQ,{}):(0,N.jsx)(N.Fragment,{})})}),(0,N.jsx)("span",{className:Q.iconTransform,children:(0,N.jsx)(d.E.span,{variants:h,initial:"initial",animate:n===f.currentIndex&&i===n&&2===f.currentStage&&f.currentStage===s?"animate":"initial",exit:"exit",className:Q.medium,children:"pending"===f.medium[n]?(0,N.jsx)(S.FAs,{}):!0===f.medium[n]?(0,N.jsx)(w.pkh,{}):!1===f.medium[n]?(0,N.jsx)(w.FUQ,{}):(0,N.jsx)(N.Fragment,{})})}),(0,N.jsx)("span",{className:Q.iconTransform,children:(0,N.jsx)(d.E.span,{variants:h,initial:"initial",animate:n===f.currentIndex&&i===n&&3===f.currentStage&&f.currentStage===s?"animate":"initial",exit:"exit",className:Q.difficult,children:"pending"===f.difficult[n]?(0,N.jsx)(S.FAs,{}):!0===f.difficult[n]?(0,N.jsx)(w.pkh,{}):!1===f.difficult[n]?(0,N.jsx)(w.FUQ,{}):(0,N.jsx)(N.Fragment,{})})})]},"icon-wrapper-".concat(n,"-").concat(r))}))]})]})})},F="Challenges_wrapper__frJq6",E="Challenges_container__fiUf+",Z="Challenges_resultimgWrapper__WMfcq",z="Challenges_resultTrackerWrapper__4leEZ",A="Challenges_imgWrapper__yJbJy",k="Challenges_imgContainer__c7f-l",b="Challenges_challengeHeadline__XTzyQ",P=function(e){var n,i,a=e.challengeArr,s=e.wrongArr,r=e.counter,c=e.updateCounter,u=e.level,o=e.cacheResults,m=(0,l.useState)(null),f=(0,t.Z)(m,2),p=f[0],h=f[1],x=(0,l.useState)({easy:[],medium:[],difficult:[]}),j=(0,t.Z)(x,2),v=j[0],_=j[1],g=(0,l.useState)({easy:"",medium:"",difficult:0}),y=(0,t.Z)(g,2),I=y[0],S=y[1],w=(0,l.useState)(1),Q=(0,t.Z)(w,2),P=Q[0],T=Q[1],M=(0,l.useState)(null),q=(0,t.Z)(M,2),U=q[0],W=q[1],B=(0,l.useRef)(""),H={initial:{opacity:0},animate:{opacity:1}};(0,l.useEffect)((function(){var e,n,i;(a&&h(a),p)&&S({easy:null===(e=p[r])||void 0===e?void 0:e.name.common,medium:null===(n=p[r])||void 0===n?void 0:n.capital[0],difficult:null===(i=p[r])||void 0===i?void 0:i.population});if(I.easy&&_({easy:V(s,"easy"),medium:V(s,"medium"),difficult:V(s,"difficult")}),p){var t,c;if(B.current===(null===(t=p[r])||void 0===t?void 0:t.flags.svg))return;B.current=p?null===(c=p[r])||void 0===c?void 0:c.flags.svg:"";var l=new Image;l.onload=function(){var e=l.width/l.height;document.documentElement.style.setProperty("--aspect-ratio","".concat(e))},l.src=B.current}}),[a,p,r,s,I.easy]);var V=function(e,n){var i=[];e.forEach((function(e){e.name.common!==I.easy&&e.capital&&e.population&&("easy"===n?i.push(e.name.common):"medium"===n?i.push(e.capital[0]):"difficult"===n&&i.push(J(e.population)))}));for(var a=[];a.length<3;){var t=Math.floor(Math.random()*i.length);a.includes(i[t])||a.push(i[t])}return a},X=function(){1===P&&("easy"===u?c():"medium"!==u&&"difficult"!==u||T(2)),2===P&&("medium"===u?(c(),T(1)):"difficult"===u&&T(3)),3===P&&(c(),T(1))},Y=function(e){W(e)},J=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")};return(0,N.jsx)("div",{className:F,children:(0,N.jsx)("div",{className:E,children:p&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:Z,children:[(0,N.jsx)("div",{className:z,children:(0,N.jsx)(R,{difficulty:u,questionIndex:r,questionStage:P,isCorrect:U,cacheResults:o})}),(0,N.jsx)("div",{className:A,children:(0,N.jsx)(d.E.div,{className:"".concat(k," img-container"),initial:{scaleY:0},whileInView:{scaleY:1},transition:{delay:.1},children:(0,N.jsx)("img",{src:null===(n=p[r])||void 0===n?void 0:n.flags.svg,alt:"",className:"quiz-img"},null===(i=p[r])||void 0===i?void 0:i.flags.svg)},r)})]}),1===P&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(d.E.h3,{className:b,variants:H,initial:"initial",animate:"animate",children:"Select the name of the country that represents this flag"}),I&&v&&(0,N.jsx)(C,{correct:I.easy,incorrect:v.easy,updateStage:X,handleResults:Y})]}),"easy"!==u&&2===P&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(d.E.h3,{className:b,variants:H,initial:"initial",animate:"animate",children:"Select the capital city of this country"}),I&&v&&(0,N.jsx)(C,{correct:I.medium,incorrect:v.medium,updateStage:X,handleResults:Y})]}),"difficult"===u&&3===P&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(d.E.h3,{className:b,variants:H,initial:"initial",animate:"animate",children:"Select the approximate population of this country"}),I&&v&&(0,N.jsx)(C,{correct:J(I.difficult),incorrect:v.difficult,updateStage:X,handleResults:Y})]})]})})})},T={noteContainer:"QuizResults_noteContainer__M3akd",noteItem:"QuizResults_noteItem__0iF3+",youScored:"QuizResults_youScored__MGbLP",wrapper:"QuizResults_wrapper__eAWLF",container:"QuizResults_container__knJJW",resultsWrapper:"QuizResults_resultsWrapper__8p+Cp",resultsContainer:"QuizResults_resultsContainer__MkT37",itemFlag:"QuizResults_itemFlag__rm6lG",filler:"QuizResults_filler__u4Mah",resultsItemHead:"QuizResults_resultsItemHead__ARRI9",resultsItem:"QuizResults_resultsItem__-1lIJ",itemName:"QuizResults_itemName__a6yAd",itemCapital:"QuizResults_itemCapital__XVXlY",itemPopulation:"QuizResults_itemPopulation__gzkai",itemPoints:"QuizResults_itemPoints__qE-FD",icon:"QuizResults_icon__oGpr+",btnContainer:"QuizResults_btnContainer__B+W1K"},M="Button_btn__N0lHo",q=function(e){var n=e.text,i=e.action;return(0,N.jsx)(d.E.button,{className:"".concat(M," quiz-btn"),onClick:i,initial:{y:-100,scale:0},animate:{y:0,scale:1},transition:{delay:1.25,duration:.1},children:n})},U=function(e){var n=e.correctData,i=e.selectedAnswers,a=(0,l.useState)(!1),s=(0,t.Z)(a,2),r=s[0],c=s[1],u=(0,l.useState)({flags:[],easy:[],medium:[],difficult:[]}),m=(0,t.Z)(u,2),f=m[0],p=m[1],h=(0,l.useState)({totalPoints:null,pointsPerCountry:[]}),x=(0,t.Z)(h,2),j=x[0],v=x[1],_={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}},g={hidden:{opacity:0,y:-100},visible:{opacity:1,y:0}},y=(0,o.s0)();(0,l.useEffect)((function(){n&&i&&!r&&(C(),c(!0))}),[n,i,r]);var C=function(){var e=[],a=[],t=[],s=[],r=0,c=[],l=null;if(l||(l=i.difficult?3:i.medium?2:1),i.easy&&n)for(var u=0;u<(null===(o=i.easy)||void 0===o?void 0:o.length);u++){var o,d,m,f;if(i.easy)a.push({value:null===(d=n[u])||void 0===d?void 0:d.name.common,isCorrect:i.easy[u]}),e.push(n[u].flags.png);if(i.medium)t.push({value:null===(m=n[u])||void 0===m?void 0:m.capital[0],isCorrect:i.medium[u]});if(i.difficult)s.push({value:null===(f=n[u])||void 0===f?void 0:f.population,isCorrect:i.difficult[u]});if(a){var h,x,j=S(a[u].isCorrect,null===(h=t[u])||void 0===h?void 0:h.isCorrect,null===(x=s[u])||void 0===x?void 0:x.isCorrect);r+=j,c[u]="".concat(j," / ").concat(l)}}a&&(p({flags:e,easy:a,medium:t,difficult:s}),v({totalPoints:r,pointsPerCountry:c}))},S=function(e,n,i){var a=0;return!0===e&&++a,!0===n&&++a,!0===i&&++a,a};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(d.E.div,{className:T.noteContainer,initial:{y:-100,scale:0},animate:{y:0,scale:1},transition:{delay:1.35},children:(0,N.jsx)("p",{className:T.noteItem,children:"Note: only the correct answers are shown in the results tab and the icon indicates whether you got it right or wrong"})}),(0,N.jsxs)("div",{className:"".concat(T.wrapper," element-full"),children:[(0,N.jsx)("div",{className:"".concat(T.container," element-border"),children:(0,N.jsx)("div",{className:T.resultsWrapper,children:(0,N.jsxs)(I.M,{children:[(0,N.jsxs)(d.E.div,{className:"".concat(T.resultsContainer," results-item-container"),variants:_,initial:"hidden",animate:"visible",children:[(0,N.jsx)("div",{className:T.itemFlag,children:(0,N.jsx)("p",{className:T.resultsItemHead,children:"Flag"})}),(0,N.jsx)("div",{className:T.itemName,children:(0,N.jsx)("p",{className:T.resultsItemHead,children:"Name"})}),i.medium&&f.medium&&(0,N.jsx)("div",{className:T.itemCapital,children:(0,N.jsx)("p",{className:T.resultsItemHead,children:"Capital"})}),i.difficult&&f.difficult&&(0,N.jsx)("div",{className:T.itemPopulation,children:(0,N.jsx)("p",{className:T.resultsItemHead,children:"Population"})})]}),f.easy[0]&&Array.from({length:10}).fill(null).map((function(e,n){return(0,N.jsxs)(d.E.div,{variants:_,initial:"hidden",animate:"visible",className:"".concat(T.resultsContainer," results-item-container"),children:[(0,N.jsx)(d.E.div,{className:" ".concat(T.itemFlag),variants:g,transition:{delay:.1*n},children:(0,N.jsx)("img",{src:f.flags[n],alt:"",className:"element-border"})}),(0,N.jsxs)(d.E.div,{className:" ".concat(T.itemName),variants:g,transition:{delay:.125*n},children:[(0,N.jsx)("p",{className:"".concat(T.resultsItem," "),children:f.easy[n].value}),(0,N.jsx)("span",{className:T.icon,children:f.easy[n].isCorrect?(0,N.jsx)(w.pkh,{color:"green"}):(0,N.jsx)(w.FUQ,{color:"red"})})]}),i.medium&&f.medium&&(0,N.jsxs)(d.E.div,{className:" ".concat(T.itemCapital),variants:g,transition:{delay:.15*n},children:[(0,N.jsx)("p",{className:"".concat(T.resultsItem," "),children:f.medium[n].value}),(0,N.jsx)("span",{className:T.icon,children:f.medium[n].isCorrect?(0,N.jsx)(w.pkh,{color:"green"}):(0,N.jsx)(w.FUQ,{color:"red"})})]}),i.difficult&&f.difficult&&(0,N.jsxs)(d.E.div,{className:" ".concat(T.itemPopulation),variants:g,transition:{delay:.175*n},children:[(0,N.jsx)("p",{className:"".concat(T.resultsItem," "),children:(a=f.difficult[n].value,a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))}),(0,N.jsx)("span",{className:T.icon,children:f.difficult[n].isCorrect?(0,N.jsx)(w.pkh,{color:"green"}):(0,N.jsx)(w.FUQ,{color:"red"})})]}),(0,N.jsx)(d.E.span,{className:T.itemPoints,variants:g,transition:{delay:.2*n},children:(0,N.jsx)("p",{children:j.pointsPerCountry[n]})})]},n);var a}))]})})}),j.pointsPerCountry[0]&&(0,N.jsx)(d.E.div,{className:T.youScoredContainer,variants:_,initial:{y:-100,scale:0},animate:{y:0,scale:1},transition:{delay:1.25},children:(0,N.jsxs)(d.E.p,{className:T.youScored,children:["You scored:"," ".concat(j.totalPoints," / ").concat(10*parseInt(j.pointsPerCountry[0].charAt(4)))]})}),(0,N.jsxs)("div",{className:T.btnContainer,children:[(0,N.jsx)(q,{text:"Back",action:function(){return y("/challenge")}}),(0,N.jsx)(q,{text:"Retry",action:function(){return y(0)}})]})]})]})},W={container:"QuizPage_container__MeROo"},B=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(n){var i,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.ZP.get(n);case 2:return i=e.sent,a=i.data.filter((function(e){return e.capital&&e.population})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),H=function(){var e=(0,o.UO)(),n=e.level,i=e.region,s=(0,l.useState)(""),r=(0,t.Z)(s,2),c=r[0],d=r[1],m=(0,l.useState)(!1),f=(0,t.Z)(m,2),p=f[0],h=f[1],x=(0,l.useState)([]),j=(0,t.Z)(x,2),v=j[0],_=j[1],g=(0,l.useState)(0),y=(0,t.Z)(g,2),C=y[0],I=y[1],S=(0,l.useState)(!1),w=(0,t.Z)(S,2),Q=w[0],R=w[1],F=(0,l.useState)({easy:null,medium:null,difficult:null}),E=(0,t.Z)(F,2),Z=E[0],z=E[1],A=(0,u.useQuery)(["Quiz",c],(function(){return B(c)}),{enabled:""!==c,staleTime:300,retry:1}),k=A.data,b=A.isLoading;(0,l.useEffect)((function(){"All"===i?d("https://restcountries.com/v3.1/all"):"All"!==i&&d("https://restcountries.com/v3.1/region/".concat(i)),k&&!p&&(_(T(k)),h(!0)),10===C&&R(!0)}),[i,k,v,p,C,Z]);var T=function(e){return e.sort((function(){return.5-Math.random()})).slice(0,10)};return(0,N.jsx)("main",{className:W.wrapper,children:!b&&(0,N.jsxs)("div",{className:W.container,children:[v&&!Q&&(0,N.jsx)(P,{level:n,challengeArr:v,wrongArr:k,counter:C,updateCounter:function(){I((function(e){return e+1}))},cacheResults:function(e,i,t){"easy"===n&&z((0,a.Z)((0,a.Z)({},Z),{},{easy:e})),"medium"===n&&z((0,a.Z)((0,a.Z)({},Z),{},{easy:e,medium:i})),"difficult"===n&&z({easy:e,medium:i,difficult:t})}}),Q&&Z.easy&&(0,N.jsx)(U,{correctData:v,selectedAnswers:Z})]})})}}}]);
//# sourceMappingURL=376.2236b8aa.chunk.js.map