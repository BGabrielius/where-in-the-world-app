"use strict";(self.webpackChunkwhereintheworld=self.webpackChunkwhereintheworld||[]).push([[455],{2402:function(e,n,t){t.d(n,{Z:function(){return l}});var a=t(9439),i=t(2791),r={wrapper:"DropdownMenu_wrapper__ZFXWD",container:"DropdownMenu_container__aEF+4",button:"DropdownMenu_button__WAcup",optionsList:"DropdownMenu_optionsList__TAlXi",show:"DropdownMenu_show__PmtXx",option:"DropdownMenu_option__cADWw","border-light-up":"DropdownMenu_border-light-up__inSoi",selectedOption:"DropdownMenu_selectedOption__KD1H5"},o=t(7510),c=t(4373),s=t(184),l=function(e){var n=e.isChallenge,t=e.filterName,l=e.handleFilter,u=e.isOpen,d=(0,i.useState)(!1),p=(0,a.Z)(d,2),h=p[0],m=p[1],g=(0,i.useState)(0),y=(0,a.Z)(g,2),v=y[0],f=y[1],_=(0,i.useState)(!0),w=(0,a.Z)(_,2),x=w[0],b=w[1],j=n?["All","Africa","Asia","Americas","Europe","Oceania"]:["Africa","Asia","Americas","Europe","Oceania"],C=function(e){b(!1),(e!==v||x)&&(l(j[e]),f(e),m(!1),u&&u())},N=function(e){return function(n){switch(n.key){case" ":case"SpaceBar":case"Enter":n.preventDefault(),C(e)}}},P=function(e){if("Escape"===e.key)e.preventDefault(),m(!1)};return(0,s.jsx)("div",{className:r.wrapper,children:(0,s.jsxs)("div",{className:r.container,children:[(0,s.jsxs)("button",{type:"button","aria-haspopup":"listbox","aria-expanded":h,className:"region-filter-container ".concat(r.button," ").concat(h?r.expanded:""),onClick:function(){m(!h),u&&u()},onKeyDown:P,children:[x?t:j[v],h?(0,s.jsx)(o.E.span,{initial:{y:0,opacity:1},animate:{y:[-20,0],opacity:[0,1]},exit:{y:20,opacity:0},children:(0,s.jsx)(c.OId,{})}):(0,s.jsx)(o.E.span,{initial:{y:0,opacity:1},animate:{y:[20,0],opacity:[0,1]},exit:{y:-20,opacity:0},children:(0,s.jsx)(c.Vmf,{})})]}),(0,s.jsx)(o.E.ul,{initial:{scaleY:0,opacity:1},animate:{scaleY:h?[0,1]:[1,0],opacity:[0,1]},viewport:{once:!0},transition:{duration:.3},style:{transformOrigin:"top",overflow:"hidden"},className:"region-filter-container ".concat(r.optionsList," ").concat(h?r.show:""),role:"listbox","aria-activedescendant":j[v],tabIndex:-1,onKeyDown:P,children:j.map((function(e,n){return(0,s.jsx)(o.E.li,{whileInView:{y:[-10*n,0],opacity:[0,1]},initial:{y:0,opacity:0},transition:{delay:.08*n},viewport:{once:!0},exit:{y:-10},id:e,role:"option","aria-selected":v===n,tabIndex:0,onKeyDown:N(n),onClick:function(){return C(n)},className:"".concat(r.option," ").concat(v===n&&!1===x&&r.selectedOption),children:e},e)}))})]})})}},170:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var a=t(1413),i=t(9439),r=t(4165),o=t(5861),c=t(2791),s=t(5772),l=t(1933),u=t(1044),d=t(7153),p=t(7510),h={wrapper:"LibraryPage_wrapper__mqSJS",container:"LibraryPage_container__D6r-H",filterContainer:"LibraryPage_filterContainer__HlZtw",searchContainer:"LibraryPage_searchContainer__tbnFB",searchFilter:"LibraryPage_searchFilter__i6yfN",searchIcon:"LibraryPage_searchIcon__RxaVV",regionFilter:"LibraryPage_regionFilter__Hw38N",errorMessage:"LibraryPage_errorMessage__qiy7O",countriesContainer:"LibraryPage_countriesContainer__HZkcD",countryContainer:"LibraryPage_countryContainer__rhJux",flagContainer:"LibraryPage_flagContainer__XENv1",flag:"LibraryPage_flag__fJFkA",statsContainer:"LibraryPage_statsContainer__domcL",countryHeadline:"LibraryPage_countryHeadline__0tc4e",countryStats:"LibraryPage_countryStats__a-c-A"},m=t(7692),g=t.p+"static/media/2u9d5w9hmbk41.9ace7d04cfea71f7fd8e.webp",y=t(2402),v="Pagination_wrapper__L-Wxe",f="Pagination_container__Sgczz",_="Pagination_prevnextContainer__C8SVX",w="Pagination_prevnextBtn__PyNu8",x="Pagination_currentPage__Fu2NT",b="Pagination_disabledBtn__KekRG",j=t(184),C=function(e){var n=e.page,t=e.swapPage,a=e.isNextValid,i={initial:{scaleX:0,opacity:0},animate:{scaleX:1,opacity:1}};return(0,j.jsx)(p.E.div,{className:v,variants:{initial:{x:100,scale:0},animate:{x:0,scale:1}},whileInView:"animate",initial:"initial",transition:{duration:.5},viewport:{once:!0},children:(0,j.jsxs)("div",{className:"".concat(f," pagination-container"),children:[(0,j.jsx)(p.E.div,{variants:i,whileHover:1===n?{}:{scale:1.1},initial:"initial",whileInView:"animate",viewport:{once:!0},transition:{duration:.5,delay:.2},className:_,children:(0,j.jsx)(p.E.button,{onClick:function(e){return t(e)},className:"".concat(w,"  prev-next-btn ").concat(1===n&&b),disabled:1===n,value:"prev",children:"Prev"})}),(0,j.jsx)(p.E.div,{initial:{y:-50,opacity:0},whileInView:{y:0,opacity:[0,1]},viewport:{once:!0},transition:{duration:.3,delay:.2},children:(0,j.jsx)("p",{className:x,children:n})}),(0,j.jsx)(p.E.div,{variants:i,whileHover:a?{scale:1.1}:{},initial:"initial",whileInView:"animate",viewport:{once:!0},transition:{duration:.5,delay:.2},className:"".concat(_," prev-next-container"),children:(0,j.jsx)(p.E.button,{onClick:function(e){return t(e)},className:" ".concat(w," prev-next-btn ").concat(!a&&b),disabled:!a,value:"next",children:"Next"})})]})})},N=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n,t,a){var i,o,c,s,l,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.ZP.get(n);case 2:return i=e.sent,12,o=1===a?60:60*(a-1),c=12*t===60*(a-1)?o:12*t,s=1===a?i.data.slice(0,c):i.data.slice(o,c),l=!(i.data.length<=12*t),d={paginated:s,allCountries:i.data,isMoreCountries:l},e.abrupt("return",d);case 10:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}(),P=function(){var e=(0,s.s0)(),n=(0,c.useState)("https://restcountries.com/v3.1/all"),t=(0,i.Z)(n,2),r=t[0],o=t[1],u=(0,c.useState)(),v=(0,i.Z)(u,2),f=v[0],_=v[1],w=(0,c.useState)(""),x=(0,i.Z)(w,2),b=(x[0],x[1]),P=(0,c.useState)(1),S=(0,i.Z)(P,2),E=S[0],L=S[1],Z=(0,c.useState)(1),k=(0,i.Z)(Z,2),D=k[0],F=k[1],H=(0,c.useState)(""),M=(0,i.Z)(H,2),A=M[0],I=M[1],V=(0,c.useState)(""),O=(0,i.Z)(V,2),X=O[0],T=O[1],K=(0,c.useState)(!1),R=(0,i.Z)(K,2),B=R[0],W=R[1],J=(0,c.useState)({display:"none",width:"2%"}),Y=(0,i.Z)(J,2),q=Y[0],z=Y[1],G=(0,c.useState)(!1),Q=(0,i.Z)(G,2),U=Q[0],$=Q[1],ee=(0,l.useQuery)(["countries",r,E,D],(function(){return N(r,E,D)}),{staleTime:300,onError:function(){b(A?"Sorry, there are no countries that would match your search":"Sorry an error has accured while fetching")},retry:0}),ne=ee.data,te=ee.isLoading,ae=ee.isFetching,ie=ee.isError,re=(0,c.useRef)(0),oe=(0,d.v)().scrollY,ce={initial:{opacity:.2,x:-100,scale:.9},animate:{opacity:1,x:0,scale:1}};(0,c.useEffect)((function(){return ne?(b(""),_(ne.paginated),W(ne.isMoreCountries)):te&&b("Loading..."),window.addEventListener("scroll",le),function(){window.removeEventListener("scroll",le)}}),[ne,te,ae,ie]);var se=function(e,n){var t;return function(){for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];t||(t=setTimeout((function(){e.apply(void 0,i),t=null}),n))}},le=se((function(){if(!1!==(null===ne||void 0===ne?void 0:ne.isMoreCountries)&&!ae&&(null===ne||void 0===ne?void 0:ne.paginated.length)%60!==0){var e=!1,n=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),t=document.documentElement.clientHeight,a=oe.get()/(n-t)*100;a>=90?e=!0:a<90&&(e=!1),e&&a>=90&&(de(),e=!1)}}),0),ue=se((function(e){if(e.target.value)if(ie||0!==re.current)if(0===re.current)re.current=e.target.value.length;else if(0!==re.current&&re.current>e.target.value.length)$(!1),o("https://restcountries.com/v3.1/name/".concat(e.target.value)),F(1),I(e.target.value),L(1),re.current=0;else{if(!(0!==re.current&&re.current<e.target.value.length))return;$(!0)}else e.target.value&&(o("https://restcountries.com/v3.1/name/".concat(e.target.value)),F(1),I(e.target.value),L(1),re.current=0);else o(X?"https://restcountries.com/v3.1/region/".concat(X):"https://restcountries.com/v3.1/all"),F(1),re.current=0,$(!1)}),200),de=function(){L(E+1)},pe=function(e){if("prev"===e){var n=window.document.documentElement.scrollHeight;window.scrollTo(0,n-window.innerHeight)}"next"===e&&window.scrollTo(0,0)};return(0,j.jsx)("main",{className:h.wrapper,children:(0,j.jsxs)("div",{className:h.container,children:[(0,j.jsxs)("div",{className:h.filterContainer,children:[(0,j.jsxs)("div",{className:"".concat(h.searchContainer," search-filter-container"),style:{width:q.width},children:[(0,j.jsx)(m.Goc,{className:h.searchIcon,onClick:function(){z((0,a.Z)((0,a.Z)({},q),{},{display:"none"===q.display?"block":"none",width:"2%"===q.width?"90%":"2%"}))}}),(0,j.jsx)("input",{type:"search",onChange:ue,placeholder:"Search for a country...",className:h.searchFilter,style:{display:q.display}})]}),(0,j.jsx)(y.Z,{isChallenge:!1,filterName:"Filter by Region",handleFilter:function(e){o("https://restcountries.com/v3.1/region/".concat(e)),T(e),F(1),L(1)}})]}),U?(0,j.jsx)("img",{src:g,alt:"meme"}):(0,j.jsx)(p.E.div,{className:h.countriesContainer,children:f?f.map((function(n){return(0,j.jsxs)(p.E.div,{variants:ce,initial:"initial",whileInView:"animate",viewport:{once:!0},transition:{type:"spring",duration:.15,stiffness:75},className:"".concat(h.countryContainer," country-card-container"),onClick:function(){return e("/library/".concat(n.name.common.toLowerCase()))},children:[(0,j.jsx)("div",{className:h.flagContainer,children:(0,j.jsx)("img",{src:n.flags.png,alt:n.cca2,className:h.flag})}),(0,j.jsxs)("div",{className:"".concat(h.statsContainer," country-card-summary"),children:[(0,j.jsx)("h3",{className:h.countryHeadline,children:n.name.common}),(0,j.jsxs)("span",{className:h.countryStats,children:[(0,j.jsx)("b",{children:"Population: "}),(0,j.jsx)("p",{children:(new Intl.NumberFormat).format(n.population)})]}),(0,j.jsxs)("span",{className:h.countryStats,children:[(0,j.jsx)("b",{children:"Region: "}),(0,j.jsx)("p",{children:n.region})]}),(0,j.jsx)("span",{className:"".concat(h.countryStats," ").concat(h.capital),children:n.capital&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("b",{children:"Capital: "}),(0,j.jsx)("p",{children:n.capital[0]})]})})]})]},n.name.common)})):(0,j.jsx)("div",{})}),60===(null===ne||void 0===ne?void 0:ne.paginated.length)||5===D||!1===(null===ne||void 0===ne?void 0:ne.isMoreCountries)&&ne.allCountries.length>60?(0,j.jsx)(C,{page:D,swapPage:function(e){"prev"===e.target.value&&D>1&&(F((function(e){return e-1})),L((function(e){return e-5})),pe("prev")),"next"===e.target.value&&(F((function(e){return e+1})),de(),pe("next"))},isNextValid:B}):(0,j.jsx)(j.Fragment,{})]})})},S=P}}]);
//# sourceMappingURL=455.4e0e4d9d.chunk.js.map